{% load humanize %}
{% load crispy_forms_tags %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Covid">
    <meta name="generator" content="Hugo 0.84.0">
    <title>Covid project</title>

    <link rel="canonical" href="https://getbootstrap.com/docs/5.0/examples/navbar-static/">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.4.1/chart.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!-- Bootstrap core CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">


<meta name="theme-color" content="#7952b3">

  </head>
  <body>
    
<nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Covid Tracker</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarCollapse">
      <ul class="navbar-nav me-auto mb-2 mb-md-0">
        <li class="nav-item">
          <a class="nav-link active" aria-current="page" href="#">Home</a>
        </li>
        <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Contact</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Info</a>
          </li>
        </ul>
        <a class="btn btn-success" href="{% url 'account_logout' %}">Logout</a>
      
    </div>
  </div>
</nav>
<br><br>

<div class="container">
  <h5 class="text-center text-muted">Data fetched from: <i><a href="https://rapidapi.com">https://rapidapi.com</a></i></h5>
  <p class="text-center">This data was last updated at <i><span class="text-success">{{time}}</span></i></p><br>
  <br><br>
  <h3 class="text-left text-muted">Day: &nbsp;&nbsp;<span class="text-success">{{day}}</span></h3>
  <h3 class="text-left text-muted">Country: &nbsp;&nbsp;<i class="fas fa-map-marker-alt text-primary"></i> <span class="text-primary">{{country}}</span></h3>
  <h3 class="text-left text-muted">Current Population: &nbsp;&nbsp;<span class="text-info">{{population|intword}}</span></h3>
  <h3 class="text-left text-muted">Covid Tests: &nbsp;&nbsp;<span class="text-success">{{tests}}</span></h3>
  <!-- <h3 class="text-left text-muted">{{country}}</h3>
  <h3 class="text-left text-muted">{{country}}</h3> -->
  <br><br>
  <div class="row">
    <div class="col-sm-3">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title text-primary text-center">{{new_cases}}</h2><br>
          <p class="card-text text-muted text-center">New cases</p>
        </div>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title text-warning text-center">{{active_cases}}</h2><br>
          <p class="card-text text-muted text-center">Infected</p>
        </div>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title text-danger text-center">{{new_deaths}}</h2><br>
          <p class="card-text text-muted text-center">Deaths</p>
        </div>
      </div>
    </div>
    <div class="col-sm-3">
      <div class="card">
        <div class="card-body">
          <h2 class="card-title text-success text-center">{{recovered}}</h2><br>
          <p class="card-text text-muted text-center">Recovered</p>
        </div>
      </div>
    </div>
  </div>  
</div>
<br><br>

<div class="container">
  <!-- <canvas id="myChart" width="80%" height="30%"></canvas> -->
  <canvas id="line-chart" width="800" height="450"></canvas>
</div>

<br><br><br>

<div class="container">
  <div style="background-color: yellow; height:50px; width:40%">
    <h1 style="text-align: center; color:black;" id="guide">Guidelines</h1>
  </div><br>
  
  <div style="margin-left:10%; margin-right: 10%;">
    <h4 style="font-weight: bold;">How it is spread:</h4>
    <p style="font-size: larger;">The virus can spread from an infected 
        person’s mouth or nose in small liquid 
        particles when they cough, sneeze, speak, 
        sing or breathe. These particles range from larger
         respiratory droplets to smaller aerosols.</p>
  
         <p style="font-size: larger;">
         Current evidence suggests that the virus spreads 
         mainly between people who are in close contact with
          each other, typically within 1 metre (short-range). 
          A person can be infected when aerosols or droplets 
          containing the virus are inhaled or come directly
           into contact with the eyes, nose, or mouth. 
         </p>
         
  
           
  </div>
  
  <div style="margin-left: 10%;font-size: larger; margin-right: 10%;">
    <h4>Preventive measures:</h4>
                <p>
                To prevent the spread of COVID-19:<br>
                a)Clean your hands often. Use soap and water, or an alcohol-based hand rub.<br>
                b)Maintain a safe distance from anyone who is coughing or sneezing.<br>
                c)Wear a mask when physical distancing is not possible.<br>
                d)Don’t touch your eyes, nose or mouth.<br>
                e)Cover your nose and mouth with your bent elbow or a tissue when you cough or sneeze.<br>
                f)Stay home if you feel unwell.<br>
                g)If you have a fever, cough and difficulty breathing, seek medical attention.
                </p>
    </div><br>
  
    <br><br>
      <h2 class="text-center">Contacts</h2>
  <br><br>
  
  <div class="container">
    <div class="row">
      <div class="col-sm-6">
        <h4 class="text-center">Leave a Note here for a Doctor if you feel any symptoms</h4>
        <form method="POST">
        {% csrf_token %}
        {{doctorform|crispy}}
        <br>
        <button type="submit" class="btn btn-primary" value="Send">Send</button>
      </form><br><br>
      </div>

        
        
          <div class="col-sm-6">
            <h3 class="text-center">Leave a comment here</h3>
            <form method="post">
          {% csrf_token %}
          {{form|crispy}}
          <input type="submit" value="Submit" class="btn btn-primary">
        </form>
          </div>
        
        <br><br>
      
        <div class="row">
          <div class="col-sm-6 mx-auto">
              {% if request.user.is_authenticated %}
              <div class="row">
              <div class="col-sm-6 mx-auto">
                {% for word in usercomments %}
                <p><b>{{forloop.counter}}</b>."{{word.comment}}" - <i><span class="text-muted">by {{word.user.username}} at {{word.timestamp}}</span></i></p>
                {% endfor %}
              </div>
            </div>
            {% endif %}
          </div>
        </div>

    </div>
  </div>
  <br>
  







  <div class="container">
  <!-- <canvas id="myChart" width="400" height="400"></canvas> -->
  <p>
     
      <!-- {{our_json_data}} -->
  </p>
  
  </div>
  <div style="background-color: yellow; height:50px; width:40%; ">
    <h2 style="text-align: center; color:black; " id="comm" >Comments</h2>
  </div><br>
  
  <div style="width: 100%; clear:both">
  <footer class="bg-dark text-center text-white">
  <!-- Grid container -->
  <div class="container p-4">
  <!-- Section: Social media -->
  <section class="mb-4">
  <!-- Facebook -->
  <a class="btn btn-outline-light  btn-floating m-1" href="" role="button"
    ><img src="https://img.icons8.com/material-rounded/24/000000/facebook-new.png"/></a>
  
  <!-- Twitter -->
  <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button">
    <img src="https://img.icons8.com/material-rounded/24/000000/twitter.png"/>
  </a>
  
  <!-- Google -->
  <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
    >
    <img src="https://img.icons8.com/ios-glyphs/30/000000/google-logo--v1.png"/>
  </a>
  
  <!-- Instagram -->
  <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
    >
    <img src="https://img.icons8.com/ios-filled/30/000000/instagram-new.png"/>
  </a>
  
  
  
  <!-- Linkedin -->
  <a class="btn btn-outline-light btn-floating m-1" href="#!" role="button"
    >
    <img src="https://img.icons8.com/ios-glyphs/30/000000/linkedin.png"/></a>
  
  <div >
  © 2021 Copyright:
  <a class="text-white" href="usiu.ac.ke">USIU website</a>
  </div>
  </section>
  </footer>
  </div>
</div>




<!-- <script>
  var myurl;
  $.getJSON("/history", function(data) {
  myurl = data;
  const new_cases = []
  const dates = []
  for (var i=0; i < myurl.length; i++){
    new_cases.push(myurl[i]["new_cases"])
    dates.push(myurl[i]["day"])
  }
  console.log(new_cases)
  var ctx = document.getElementById('myChart').getContext('2d');
  var myChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: [...dates],
      datasets: [{
        label: '# of Cases',
        data: [...new_cases], // we will fetch the json data
        backgroundColor: [
          'rgba(255, 99, 132, 0.2)',
          'rgba(54, 162, 235, 0.2)',
          'rgba(255, 206, 86, 0.2)'
        ],
        borderColor: [
          'rgba(255, 99, 132, 1)',
          'rgba(54, 162, 235, 1)',
          'rgba(255, 206, 86, 1)',
        ],
        borderWidth: 1
      }]
    },
    options: {
      //indexAxis: 'y',
      scales: {
        y: {
          beginAtZero: true
        }
      }
    }
  });
  });
</script> -->


<script>
  var myurl;
  $.getJSON("/history", function(data) {
  myurl = data;
  const total_cases = []
  const total_deaths = []
  const recovered = []
  const dates = []
  for (var i=0; i < myurl.length; i++){
    total_cases.push(myurl[i]["total_cases"])
    dates.push(myurl[i]["day"])
    total_deaths.push(myurl[i]["total_deaths"])
    recovered.push(myurl[i]["recovered"])
  }
  // console.log(new_cases)
  new Chart(document.getElementById("line-chart"), {
    type: 'line',
    axisY:{
       interval: 90
     },
    data: {
      labels: [...dates],
      datasets: [{ 
          data: [...total_cases],
          label: "Total Cases",
          borderColor: "#1169CD ",
          fill: false
        }, 
        {
          data:[...total_deaths],
          label: "Total Deaths",
          borderColor: "#FF5733",
          fill: false
        },
        {
          data: [...recovered],
          label: "Recovered",
          borderColor: "#319523"
        }
      ]
    },
    options: {
      title: {
        display: true,
        text: 'World population per region (in millions)'
      },
      scales: {
      x: {
        title: {
          display: true,
          text: 'Month'
        },
        ticks: {
          // forces step size to be 50 units
          stepSize: 100
        }
      },
      y: {
        title: {
          display: true,
          text: '# of Cases'
        },
        // min: 0,
        // max: 100,
        // ticks: {
        //   // forces step size to be 50 units
        //   stepSize: 100
        // }
      }
    }
    }
  }); 
});
</script>



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>


  </body>
</html>
